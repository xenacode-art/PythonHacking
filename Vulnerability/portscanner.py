import socket
from  IPY import IP


class PortScan():
 def __init__(self, target, port_num):
     self.target = target
     self.port_num = port_num

 def scan(self):
   for port in range(1,port_num):
      self.scan_port(port)



 def check_ip(self):
    try:
      IP(self.target)
      return(self.target)
     #IP(ip)
     #return(ip)
    except ValueError:
      return socket.gethostbyname(self.target)
      #return socket.gethostbyname(ip)
   

 def scan_port(self,port):
  try:
      converted_ip = self.check_ip()
      sock = socket.socket()
      sock.settimeout(0.5)
      sock.connect ((converted_ip ,  port))
      self.open_ports.append(port)
      try:
         banner = sock.recv(1024).decode().strip('\n').strip('\r')
         self.banners.append(banner)
          
          #print(' [+] Open Port ' + str(port) + ':' + str(banner.decode().strip('\n')))
      except:
        self.banners.append(' ')
      sock.close()
          
  except:
   pass
       
    
#if __name__ == "__main__":   
 #  targets = input('[+] Enter Target/s To IP Scan  (split targets    with , ) : ')   
  # port_num = input('[+] Enter Number Of Port To Scan: ')
   #if ',' in targets:
 #    for ip_add in targets.split(','):
  #     scan(ip_adds.strip(' '), port_num) 
   #else:
    #  scan(targets , port_num)   

  
  